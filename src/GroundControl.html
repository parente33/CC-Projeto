
<!DOCTYPE html>
<html>
    <head>
        <title> Ground Control </title>
        <style>
            table { border-collapse: collapse; width: 80%; margin-bottom: 20px; }
            th, td { border: 1px solid #333; padding: 8px; text-align: left; }
            th { background-color: #555; color: white; }
        </style>
    </head>
    <body>
        <h1>Active_Rovers</h1>

        <h2>Rover Stats</h2>
            <table id="rover-table">
                <thead>
                    <tr>
                        <th>Rover ID</th>
                        <th>Status</th>
                        <th>Position</th>
                        <th>Last Update</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>

        <h2>Missions</h2>
            <table id="missions-table">
                <thead>
                    <tr>
                        <th>Mission ID</th>
                        <th>Geographic Area</th>
                        <th>Task</th>
                        <th>Max Duration</th>
                        <th>Atualization Interval</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>

        <h2>Last Reports</h2>
            <table id="reports-table">
                <thead>
                    <tr>
                        <th>Report ID</th>
                        <th>Rover ID</th>
                        <th>Mission ID</th>
                        <th>Mission Status</th>
                        <th>Current Duration</th>
                        <th>Completion</th>
                        <th>Timestamp</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        
        <script>
            async function fetchData() {
                
                let result = await fetch("http://localhost:8000/active_rovers");
                let rovers = await result.json();
                populateTable("rover-table", rovers, ["rover_id","status","position","last_update"]);

                result = await fetch("http://localhost:8000/missions");
                let missions = await result.json();
                populateTable("missions-table", missions, ["mission_id","geographic_area","task","max_duration","atualization_interval"]);

                result = await fetch("http://localhost:8000/reports");
                let reports = await result.json();
                populateTable("reports-table", reports, ["id","rover_id","mission_id","mission_status","current_duration","completion","timestamp"]);
            }

            function populateTable(tableId, data, columns) {
                const tbody = document.getElementById(tableId).querySelector("tbody");
                tbody.innerHTML = "";
                data.forEach(item => {
                    const tr = document.createElement("tr");
                    columns.forEach(col => {
                        const td = document.createElement("td");
                        td.textContent = item[col] || "";
                        tr.appendChild(td);
                    });
                    tbody.appendChild(tr);
                });
            }

            setInterval(fetchData, 2000);
            fetchData();
        </script>
    </body>
</html>
